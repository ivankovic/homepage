<!doctype html><html lang=de><head><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><title>MikroTik Firewall-Filterregeln synchronisieren</title>
<link rel="shortcut icon" href=/favicon.ico type=image/ico><link rel=apple-touch-icon href=/app-icon.png><link rel=canonical href=https://www.ivankovic.me/de/marko/blog/mikrotik-sync-firewall-rules-script/><link rel=alternate type=application/rss+xml href=https://www.ivankovic.me//index.xml title="Ivankovic Family Website"><meta name=description content="Ein Skript zur Synchronisation von Firewall-Filterregeln. Geeignet fÃ¼r CAPsMAN."><meta name=keywords content="MikroTik ,CAPsMAN ,Firewall-Regeln synchronisieren ,MikroTik Skript"><link rel=preload as=font href=/fonts/Sora.ttf type=font/ttf crossorigin><link crossorigin=anonymous integrity="sha256-r/KsfVBDkYWYvkRTP3m7OXHMVmjEGHRiMl72xUC9TvE=" rel=stylesheet href=/css/bundle.min.aff2ac7d5043918598be44533f79bb3971cc5668c4187462325ef6c540bd4ef1.css><meta name=twitter:card content="summary"><meta name=twitter:title content="MikroTik Firewall-Filterregeln synchronisieren"><meta name=twitter:description content="Ein Skript zur Synchronisation von Firewall-Filterregeln. Geeignet fÃ¼r CAPsMAN."><meta property="og:url" content="https://www.ivankovic.me/de/marko/blog/mikrotik-sync-firewall-rules-script/"><meta property="og:site_name" content="Ivankovic Family Website"><meta property="og:title" content="MikroTik Firewall-Filterregeln synchronisieren"><meta property="og:description" content="Ein Skript zur Synchronisation von Firewall-Filterregeln. Geeignet fÃ¼r CAPsMAN."><meta property="og:locale" content="de"><meta property="og:type" content="article"><meta property="article:section" content="marko"><meta property="article:published_time" content="2025-03-06T00:00:00+00:00"><meta property="article:modified_time" content="2025-03-06T00:00:00+00:00"></head><body><header><nav><div class=menu><a href=https://www.ivankovic.me/de/marina>Marina ÄŒelar IvankoviÄ‡</a>
<a href=https://www.ivankovic.me/de/marko>Marko IvankoviÄ‡</a>
<a class=call-to-action href=https://www.ivankovic.me/de/contact>Kontakt</a></div><div class=languages><a href=https://www.ivankovic.me/de/marko/blog/mikrotik-sync-firewall-rules-script/>ğŸ‡¨ğŸ‡­
</a><a href=https://www.ivankovic.me/marko/blog/mikrotik-sync-firewall-rules-script/>ğŸ‡¬ğŸ‡§
</a><a href=https://www.ivankovic.me/hr/marko/blog/mikrotik-sync-firewall-rules-script/>ğŸ‡­ğŸ‡·</a></div></nav></header><div id=main class=page><div id=content><div id=blog-headline><div id=blog-title><h1>MikroTik Firewall-Filterregeln synchronisieren</h1></div><div>Eine Minute zum Lesen</div><div>Teilen am:
<a href="https://bsky.app/intent/compose?text=I am reading https%3a%2f%2fwww.ivankovic.me%2fde%2fmarko%2fblog%2fmikrotik-sync-firewall-rules-script%2f" rel="noopener noreferrer">Bluesky</a>
<a href="https://www.linkedin.com/feed/?shareActive=true&text=I am reading https%3a%2f%2fwww.ivankovic.me%2fde%2fmarko%2fblog%2fmikrotik-sync-firewall-rules-script%2f" target=_blank rel="noopener noreferrer">Linkedin</a>
<a href="https://twitter.com/intent/tweet?text=&url=https%3a%2f%2fwww.ivankovic.me%2fde%2fmarko%2fblog%2fmikrotik-sync-firewall-rules-script%2f)" rel="noopener noreferrer">Twitter</a></div></div><h2 id=das-problem>Das Problem</h2><p>Sie haben einen einzelnen Haupt-MikroTik-Router. Sie mÃ¶chten die Firewall-Regeln vom Hauptrouter zu allen NachbargerÃ¤ten synchronisieren.</p><p>Dies ist hÃ¤ufig der Fall, wenn Sie CAPsMAN auf einem zentralen Router und mehrere CAP Access Points haben, da CAPsMAN keine Filterregeln synchronisiert.</p><h2 id=das-skript>Das Skript</h2><p>Sie <strong>mÃ¼ssen</strong> <a href=https://help.mikrotik.com/docs/spaces/ROS/pages/132350014/SSH#SSH-EnablingPKIauthentication>SSH-Public-Key-Login</a> aktiviert haben.</p><p>Hier ist das Skript:</p><div class=highlight><pre tabindex=0 style=color:#4c4f69;background-color:#eff1f5;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>:put <span style=color:#40a02b>&#34;Exportiere aktuelle Firewall-Filterregeln...&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>/ip firewall filter <span style=color:#04a5e5>export</span> <span style=color:#dc8a78>file</span><span style=color:#04a5e5;font-weight:700>=</span>filterRules
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>:local cpes <span style=color:#04a5e5;font-weight:700>[</span>/ip neighbor print as-value<span style=color:#04a5e5;font-weight:700>]</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>:foreach cpe <span style=color:#dc8a78>in</span><span style=color:#04a5e5;font-weight:700>=</span><span style=color:#dc8a78>$cpes</span> <span style=color:#8839ef>do</span><span style=color:#04a5e5;font-weight:700>={</span>
</span></span><span style=display:flex><span>    :put <span style=color:#04a5e5;font-weight:700>((</span><span style=color:#dc8a78>$cpe</span>-&gt;<span style=color:#40a02b>&#34;address&#34;</span><span style=color:#04a5e5;font-weight:700>)</span> . <span style=color:#40a02b>&#34; &#34;</span> . <span style=color:#dc8a78>$cpe</span>-&gt;<span style=color:#40a02b>&#34;identity&#34;</span><span style=color:#04a5e5;font-weight:700>)</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    /tool fetch <span style=color:#dc8a78>upload</span><span style=color:#04a5e5;font-weight:700>=</span>yes <span style=color:#dc8a78>mode</span><span style=color:#04a5e5;font-weight:700>=</span>ftp <span style=color:#1e66f5>\
</span></span></span><span style=display:flex><span><span style=color:#1e66f5></span>        <span style=color:#dc8a78>user</span><span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#34;admin&#34;</span> <span style=color:#dc8a78>password</span><span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#34;PASSWORD&#34;</span> <span style=color:#1e66f5>\
</span></span></span><span style=display:flex><span><span style=color:#1e66f5></span>        src-path<span style=color:#04a5e5;font-weight:700>=</span>filterRules.rsc dst-path<span style=color:#04a5e5;font-weight:700>=</span>filterRules.rsc <span style=color:#1e66f5>\
</span></span></span><span style=display:flex><span><span style=color:#1e66f5></span>        <span style=color:#dc8a78>address</span><span style=color:#04a5e5;font-weight:700>=(</span><span style=color:#dc8a78>$cpe</span>-&gt;<span style=color:#40a02b>&#34;address&#34;</span><span style=color:#04a5e5;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    /system ssh-exec <span style=color:#dc8a78>user</span><span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#34;admin&#34;</span> <span style=color:#dc8a78>address</span><span style=color:#04a5e5;font-weight:700>=(</span><span style=color:#dc8a78>$cpe</span>-&gt;<span style=color:#40a02b>&#34;address&#34;</span><span style=color:#04a5e5;font-weight:700>)</span> <span style=color:#1e66f5>\
</span></span></span><span style=display:flex><span><span style=color:#1e66f5></span>        <span style=color:#dc8a78>command</span><span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#34;/ip firewall filter remove [find dynamic=no]; import filterRules.rsc; /file remove filterRules.rsc;&#34;</span>
</span></span><span style=display:flex><span><span style=color:#04a5e5;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>:put <span style=color:#40a02b>&#34;Synchronisation der Firewall-Filterregeln abgeschlossen!&#34;</span>
</span></span></code></pre></div><p>Dieses Skript lÃ¶scht zuerst alle manuell hinzugefÃ¼gten Regeln auf den cAPs. Bitte beachten Sie dies. Es stellt sicher, dass die Regeln <strong>exakt</strong> gleich sind. Alle Ã„nderungen, die Sie danach vornehmen, werden gelÃ¶scht, wenn Sie das Skript erneut ausfÃ¼hren.</p></div></div><footer class=footer><span>&copy; 2025 <a href=https://www.ivankovic.me/de/>Ivankovic Family Website</a> |
<a href=https://www.ivankovic.me/de/disclaimer rel="noopener noreferrer" target=_blank>Haftungsausschluss</a> |
<a href=https://www.ivankovic.me/de/privacy rel="noopener noreferrer" target=_blank>Datenschutz</a> |
<a href=https://www.ivankovic.me/de/impressum rel="noopener noreferrer" target=_blank>Impressum</a></span></footer></body></html>
<!DOCTYPE HTML>
<html lang="en">
  <head>
    <title>Teaching my Raspberry Pi nodes how to contact me</title>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans|Poiret+One" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="https://www.ivankovic.me/css/style.css" media="screen">
    <link rel="icon" href="/favicon.ico">
    <meta charset="utf-8">
<meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">

    <script>
      function toggle() {
        menu = document.getElementById('menu')
        menu.style.display = (menu.style.display == 'none' || menu.style.display == '' ? 'block' : 'none')
      }
    </script>
  </head>
  <body>
    <div
       id="main"
       
    >


<header>
  <nav>
    <a href="/">Ivankovic.Me</a>
    <a href="/photography/">Photography</a>
    <a href="/blog/" >Blog</a>
    <span id="subpages">
      <a href="/contact/" >Contact</a>
      <a href="/about/" >About</a>
    </span>
  </nav>
</header>


<div id="content" style="display: block; padding-left: 64px;" itemscope itemtype="https://schema.org/BlogPosting">
  

<h1 id="teaching-my-raspberry-pi-nodes-how-to-contact-me:90ac5c191c690b5a292c1852a6ca5809">Teaching my Raspberry PI nodes how to contact me</h1>

<p>Like every good little robot, my R-PI nodes need a way to contact me if anything goes wrong. The best way I found was by using good old email. It’s incredibly easy to set up and quite secure (believe it or not).</p>

<p>Since my nodes only ever need to send email to contact me, never to read it, instead of using the more complicated <a href="http://www.sendmail.org/">Sendmail</a> or <a href="http://www.mutt.org/">mutt</a>, I use <a href="https://wiki.debian.org/sSMTP">sSMTP</a>.</p>

<p>First thing I did was create another Gmail account, to be used by the robots. A single account for all nodes is the best idea. It’s not the most secure option, but it is good enough and the overhead is low.</p>

<p>Note that if you use Gmail for the robots and if you personally use a Gmail account and use TLS (which is mandatory), you in fact have end-to-end <strong>in-transit</strong> encryption for these emails, yay!</p>

<p>There are many tutorials out there on the web that go into details on setting up sSMTP with Gmail. I’ll just summarize the config here.</p>

<pre><code>root=&lt;ACCOUNT&gt;@gmail.com
mailhub=smtp.gmail.com:587
rewriteDomain=
AuthMethod=LOGIN
UseTLS=YES
UseSTARTTLS=YES
FromLineOverride=YES
AuthUser=&lt;ACCOUNT&gt;@gmail.com
AuthPass=&lt;PASSWORD&gt;
</code></pre>

<p>As soon as you set up sSMTP, you can send emails with:</p>

<pre><code>echo &lt;CONTENTS&gt; | mail -s &lt;SUBJECT&gt; &lt;DESTINATION ADDRESS&gt;
</code></pre>

<p>If you would like to send attachments (for example images captured by <a href="http://www.raspberrypi.org/camera">PiCam</a>), you can use either <a href="http://en.wikipedia.org/wiki/Mailx">mailx</a> or <a href="http://packages.debian.org/sid/mpack">mpack</a>. I personally use mpack, for no particular reason:</p>

<pre><code>mpack -s &lt;SUBJECT&gt; &lt;FILE&gt; &lt;DESTINATION ADDRESS&gt;
</code></pre>

<h2 id="further-improvements:90ac5c191c690b5a292c1852a6ca5809">Further improvements</h2>

<p>This is just a basic communication layer for your PI-s when they need to contact you. You can use it as is, but I would recommend using it in combination with <a href="http://www.gnupg.org/">GPG</a> to ensure end-to-end at-rest encryption as well.</p>

</div>

    </div>
  </body>
</html>

